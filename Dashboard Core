# main.py
import psutil
import datetime
from lunar_phase import get_moon_phase  # We'll create this module next

def get_system_metrics():
    """Returns CPU and memory usage."""
    cpu = psutil.cpu_percent(interval=1)
    memory = psutil.virtual_memory().percent
    return cpu, memory

def format_display_data():
    """Combines system metrics with lunar phase."""
    cpu, memory = get_system_metrics()
    moon_phase = get_moon_phase(datetime.datetime.now())
    return {
        "CPU": f"{cpu}%",
        "Memory": f"{memory}%",
        "Moon Phase": moon_phase
    }

def display_to_console(data):
    """Temporary console output (replace with HMI serial later)."""
    for key, value in data.items():
        print(f"{key}: {value}")

if __name__ == "__main__":
    data = format_display_data()
    display_to_console(data)
